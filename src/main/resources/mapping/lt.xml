<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    
    
    <mapper namespace="com.accp.dao.lt.IUserDao">
    <!-- 模糊查询编码和名称 -->
    
    
    
    
	<select id="queryUser" resultType="com.accp.vo.lt.UserVo">
			SELECT u.`userID`,u.`userName`,l.`userEmail`,u.`userIntegral`,u.`userMoney`,l.`loginType`,
		u.`auditStatus`,u.`userPhone` ,u.`merchantType`,u.merchanttype,u.recentEntry FROM `user` AS u
		JOIN login AS l ON u.`userID`=l.`userID`
		<where>
			<if test="username!=null">
				 u.`userName` like '%${username}%'
			</if>
			u.`merchantType` =0
		</where>
	</select>
	
	
	
	
	
	<select id="queryUserId" resultType="com.accp.vo.lt.VipVo">
		SELECT u.`userID`,u.`userName`,l.`userEmail`,l.`loginType`,u.`userRealName`,l.`userPwd`,u.`userSex`,
		u.`country`,u.`provincialID`,u.`cityID`,u.`auditStatus`,u.`userPhone`,u.`merchantType`,u.`recentEntry` FROM `user` AS u
		JOIN login AS l ON u.`userID`=l.`userID`
		where u.userID=#{userid}
	</select>
	
	<update id="updateVip">
		UPDATE `user` SET userPhone=#{vo.userPhone},userRealName=#{vo.userRealName},userSex=#{vo.userSex},auditStatus=#{vo.auditStatus} WHERE userID=#{vo.userID};

	</update>
	
	
	<update id="updateVip2">

		UPDATE `login` SET userPwd=#{vo.userPwd},loginType=#{vo.loginType} WHERE userID=#{vo.userID};
	</update>
	
	
	
		<select id="queryShop" resultType="com.accp.vo.lt.UserVo">
		SELECT u.`userID`,u.`userName`,l.`userEmail`,u.`userIntegral`,u.`userMoney`,l.`loginType`,
		u.`auditStatus`,u.`userPhone`,u.`merchantType`,u.`recentEntry`,u.`shopName` FROM `user` AS u
		JOIN login AS l ON u.`userID`=l.`userID`
		<where>
			<if test="userName!=null">
				 u.`userName` like '%${userName}%' and
			</if>
			<if test="shopName!=null">
				 u.`shopName` like '%${shopName}%'  and
			</if>
			<if test="merchantType!=null">
				 u.`merchantType` like '%${merchantType}%' and
			</if>
				u.`merchantType` =1 or u.`merchantType`=2
		</where>
	</select>
	
    </mapper>
    
    
    
    